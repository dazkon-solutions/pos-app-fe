<!-- 
  Copyright (c) 2024 DAZKON SOLUTIONS (DAZKON PVT LTD)
  All rights reserved.  
  This code is proprietary to DAZKON SOLUTIONS. 
  Unauthorized use, reproduction, modification, distribution, or sale 
  without the explicit written permission of DAZKON SOLUTIONS is strictly prohibited.
  For inquiries, please contact: info@dazkonsolutions.com 
-->

@let config = config$ | async;

<span class="daz-main-search-field" >

  <form [formGroup]="form" >
    <mat-form-field class="search-field" 
                    subscriptSizing="dynamic" >

      <input matInput 
             formControlName="search"
             name="search"
             maxlength="255"
             [placeholder]="config?.label ?? '' | translate" >

      @if (hasSearchValue() || isFiltered) {
        <!-- Clear button -->
        <mat-icon svgIcon="close" 
                  class="clear-btn"
                  matSuffix
                  matRipple 
                  [matTooltip]="LocaleKeys.tooltips.clear | translate"
                  (click)="onClickClearForm()" />
        <!-- End of clear button -->
         
      } @else {
        <mat-icon svgIcon="search" matSuffix />
      }

    </mat-form-field>
  </form>

  <!-- Advanced filter button -->
  <button matPrefix 
          mat-fab extended 
          class="btn-fab-basic-primary advanced-filter-btn"
          [class.advanced-filter-active]="isFiltered"
          [disabled]="!config?.hasFilter"
          (click)="onClickAdvancedFilter()" >
    <mat-icon svgIcon="deep-search" />
    {{ LocaleKeys.labels.buttons.deepSearch | translate }}
  </button>
  <!-- End of advanced filter button -->
</span>