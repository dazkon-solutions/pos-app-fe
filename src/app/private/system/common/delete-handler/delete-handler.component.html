<!-- 
  Copyright (c) 2024 DAZKON SOLUTIONS (DAZKON PVT LTD)
  All rights reserved.  
  This code is proprietary to DAZKON SOLUTIONS. 
  Unauthorized use, reproduction, modification, distribution, or sale 
  without the explicit written permission of DAZKON SOLUTIONS is strictly prohibited.
  For inquiries, please contact: info@dazkonsolutions.com 
-->

@let isLoading = (isLoading$ | async) ?? false;
@let isDeletable = (isDeletable$ | async) ?? false;

<!-- Content -->
<mat-dialog-content >
  @if (isLoading) {
    <daz-delete-handler-skeleton />

  }
  @else if (isDeletable) {
    <ng-container [ngTemplateOutlet]="DeleteConfirmationTemplate" />

  } @else {
    <ng-container [ngTemplateOutlet]="NotDeletableTemplate" />
  }

</mat-dialog-content>
<!-- End of content -->

<!-- Action section -->
@if (!isLoading) {
  <mat-dialog-actions >
    <ng-container [ngTemplateOutlet]="ActionsTemplate" />
  </mat-dialog-actions>
}
<!-- End of action section -->


<!-- Delete confirmation template -->
<ng-template #DeleteConfirmationTemplate >
  <daz-animation-player [animationType]="AnimationType.DELETE_CONFIRMATION" />

  <div class="container" >
    <h2 mat-dialog-title >
      {{ LocaleKeys.titles.areYouSureYouWantToDelete | translate }}
    </h2>

    <p class="mat-body-large" >{{ data.description }}</p>
  </div>
</ng-template>
<!-- End of delete confirmation template -->


<!-- Not deletable template -->
@let errorMessages = (errorMessages$ | async) ?? [];
<ng-template #NotDeletableTemplate >
  <daz-animation-player [animationType]="AnimationType.DO_NOT" />

  <div class="container" >
    <h2 mat-dialog-title >
      {{ LocaleKeys.titles.youCannotDelete | translate }}
    </h2>

    <ul >
      @for (item of errorMessages; track $index) {
        <li >{{ item }}</li>
      }
    </ul>
  </div>
</ng-template>
<!-- End of not deletable template -->


<!-- Actions template -->
@let isProcessing = (isProcessing$ | async) ?? false;
<ng-template #ActionsTemplate >
  @if (isDeletable) {
    <button mat-button 
            mat-dialog-close
            [disabled]="isProcessing" >
      {{ LocaleKeys.labels.buttons.cancel | translate }}
    </button>
    
    <daz-action-button [config$]="deleteButton$"
                       (buttonClicked)="deleteClicked($event)" />

  } @else {
    <button mat-flat-button 
            mat-dialog-close >
      {{ LocaleKeys.labels.buttons.ok | translate }}
    </button>
  }
</ng-template>
<!-- End of actions template -->