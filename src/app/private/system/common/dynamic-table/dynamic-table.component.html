<!-- 
  Copyright (c) 2024 DAZKON SOLUTIONS (DAZKON PVT LTD)
  All rights reserved.  
  This code is proprietary to DAZKON SOLUTIONS. 
  Unauthorized use, reproduction, modification, distribution, or sale 
  without the explicit written permission of DAZKON SOLUTIONS is strictly prohibited.
  For inquiries, please contact: info@dazkonsolutions.com 
-->

<table mat-table 
       [dataSource]="dataSource" 
       class="mat-elevation-z8 table" >

  @for (column of displayedColumns; track column) {
    <ng-container [matColumnDef]="column.name" >

      <!-- Hader section -->
      <th mat-header-cell 
          *matHeaderCellDef 
          class="header"
          [class]="column.alignment"
          [class.left-side-header]="isSideHeader('LEFT', column.name)"
          [class.right-side-header]="isSideHeader('RIGHT', column.name)"
          [style.background-color]="headerColor" > 
        {{ column.isVisibleHeader ? column.name : '' | translate }} 
      </th>
      <!-- End of header section -->

      <!-- Row section -->
      <td mat-cell 
          *matCellDef="let element"
          [class]="column.alignment" >
        @switch (column.type) {
          @case (DynamicTableColumnType.IMAGE) {
            <img class="cell-image" 
                 [src]="element[column.name]" 
                 alt="image" >
          }
          @case (DynamicTableColumnType.TEXT) {
            {{ element[column.name] }}
          }
          @case (DynamicTableColumnType.CURRENCY) {
            {{ element[column.name] | currency: ' ' }}
          }
          @case (DynamicTableColumnType.DATE) {
            {{ element[column.name] | date: 'dd/MM/yyyy' }}
          }
          @case (DynamicTableColumnType.ACTION_BUTTON) {
            <button (click)="onClick(Action.VIEW, 
                                     element)" >
              click me
            </button>
          }
          @default {
            {{ element[column.name] }} 
          }
        }
      </td>
      <!-- End of row section -->
    </ng-container>
  }

  <tr mat-header-row 
      *matHeaderRowDef="columnsToDisplay 
      sticky: true" >
  </tr>
  <tr mat-row *matRowDef="let row; columns: columnsToDisplay;" ></tr>
</table>